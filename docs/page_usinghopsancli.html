<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hopsan: Using The Hopsan CLI Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hopsan.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hopsan
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_usinghopsancli.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Using The Hopsan CLI Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Hopsan CLI (Command Line Interface) is an application that you can use to simulate Hopsan models from the command line. The CLI has a number of options that let you load models, import/export parameter sets, export the simulation results and run tests. The CLI can be called from external programs or scripts. This is useful if you want to run batch tests or if you want to run Hopsan simulations from an external application that do not have "co-simulation" or "export" support in Hopsan.</p>
<p>The Hopsan CLI can be used to simulate existing models, but you cannot create models with the CLI. Use the HopsanGUI application for that.</p>
<p>The HopsanCLI is located in the <code>\bin</code> folder of your Hopsan installation. By calling <code>hopsancli --help</code> you will get help output showing you all the options. The help text is also given here for your convenience, but be sure to check the actual help since this manual page may not always be up-to-date. </p><pre class="fragment">USAGE: 

   ./hopsancli  [-m &lt;Path to file&gt;] [-e &lt;Path to file&gt;] ...
                [--externalLibsFile &lt;Path to file&gt;] [-s &lt;Comma separated
                string&gt;] [-l &lt;integer&gt;] [-t &lt;Path to .hvc file&gt;]
                [--parameterImport &lt;Path to file&gt;] [--parameterExport
                &lt;Path to file&gt;] [--resultsFullCSV &lt;Path to file&gt;]
                [--resultsFinalCSV &lt;Path to file&gt;] [--resultsCSVSort
                &lt;string&gt;] [--loadSimState &lt;string&gt;] [--saveSimState
                &lt;string&gt;] [-d &lt;Path to directory&gt;]
                [--buildComponentLibrary &lt;string&gt;]
                [--prefixRootSystemName] [--createValidationData]
                [--printDebug] [--endPause] [--testInstanciateComponents]
                [--] [--version] [-h]


Where: 

   -m &lt;Path to file&gt;,  --hmf &lt;Path to file&gt;
     The Hopsan model file to load

   -e &lt;Path to file&gt;,  --externalLib &lt;Path to file&gt;  (accepted multiple
      times)
     Path to a .dll/.so/.dylib externalComponentLib. Can be given multiple
     times

   --externalLibsFile &lt;Path to file&gt;
     A text file containing the external libs to load

   -s &lt;Comma separated string&gt;,  --simulate &lt;Comma separated string&gt;
     Specify simulation time as: [hmf] or [start,ts,stop] or [ts,stop] or
     [stop]

   -l &lt;integer&gt;,  --numLogSamples &lt;integer&gt;
     Set the number of log samples to store for the top-level system,
     (default: Use number in .hmf)

   -t &lt;Path to .hvc file&gt;,  --validate &lt;Path to .hvc file&gt;
     Perform model validation based on HopsanValidationConfiguration

   --parameterImport &lt;Path to file&gt;
     CSV file with parameter values to import

   --parameterExport &lt;Path to file&gt;
     CSV file with exported parameter values

   --resultsFullCSV &lt;Path to file&gt;
     Export the results (all logged data)

   --resultsFinalCSV &lt;Path to file&gt;
     Export the results (only final values)

   --resultsCSVSort &lt;string&gt;
     Export results in columns or in rows: [rows, cols]

   --loadSimStartValues &lt;string&gt;
     Load the start values (simulation state without time offset) from this file

   --loadSimState &lt;string&gt;
     Load the simulation state (with time offset) from this file

   --saveSimState &lt;string&gt;
     Export the simulation state to this file

   -d &lt;Path to directory&gt;,  --destination &lt;Path to directory&gt;
     Destination for resulting files

   --buildComponentLibrary &lt;string&gt;
     Build the specified component library (point to the library xml)

   --prefixRootSystemName
     Prefix the root-level system name to exported results and parameters

   --createValidationData
     Create a model validation data set based on the variables connected to
     scopes in the model given by option -m

   --printDebug
     Show debug messages in the output

   --endPause
     Pauses the CLI at the end to let you see its output

   --testInstanciateComponents
     Create an instance of each registered component to look for errors.

   --,  --ignore_rest
     Ignores the rest of the labeled arguments following this flag.

   --version
     Displays version information and exits.

   -h,  --help
     Displays usage information and exits.</pre><p><b>Some run command examples:</b><br />
These examples use MS Windows filename syntax. (On Linux you should use forward / instead of backslash)</p>
<pre class="fragment">hopsancli -m "path_to\MyModel.hmf" -s hmf --resultsFullCSV myFullLogdata.csv
</pre><p> This will simulate a model using the simulation time set in the model file and exports the entire logdata set to a CSV format file</p>
<pre class="fragment">hopsancli -m "path_to\MyModel.hmf" -s -1,0.001,10 --resultsFinalCSV myFinalLogdata.csv
</pre><p> This will simulate a model using specified simulation time startT,Ts,stopT and exports the final values from the logdata set to a CSV format file</p>
<pre class="fragment">hopsancli -m "path_to\MyModel.hmf" --parameterExport myModelParameters.csv
</pre><p> This will export the parameters from the model in a CSV file format. The model will not be simulated.</p>
<pre class="fragment">hopsancli -m "path_to\MyModel.hmf" --parameterImport myModelNewParameters.csv -s 0,0.001,10 --resultsFinalCSV myFinalLogdata.csv
</pre><p> This will import the parameters from a csv file (same format as exported in the previous command example) and simulate the model using the specified parameter values. (This is useful when calling models from external programs if you want to change parameters. For instance, usually when running external optimization.</p>
<pre class="fragment">hopsancli -m "path_to\MyModel.hmf" -e "somePathTo\myCompLib1.dll" -e "someOtherPathTo\myCompLib2.dll" -s hmf --resultsFullCSV myFullLogdata.csv
</pre><p> This will load your model and two external component libraries, then simulate and export the results.</p>
<pre class="fragment">hopsancli -t "somePathTo\myModelValidation.hvc"
</pre><p> This will load a model validation configuration file and run the validation tests. Text will be shown whether the tests pass or fail. The Hopsan CLI return value will also reflect failure or success. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Sep 16 2019 10:42:36 for Hopsan by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
