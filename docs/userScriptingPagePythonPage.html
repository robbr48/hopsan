<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hopsan: Python Scripting</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hopsan.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hopsan
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('userScriptingPagePythonPage.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Python Scripting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Python Console in Hopsan can be used for scripting simulations of your models. It includes features for modifying parameters, setting simulation times and so on. All Python interaction with Hopsan is done through an object called "hopsan". The commands as well as command examples are available and described below.</p>
<p><b>Note!</b> Python script functions are not working very well! It is recommended that you use HCOM instead. Python script support may be improved in a future release.</p>
<h1><a class="anchor" id="PyMessageCommands"></a>
Message Commands</h1>
<h2><a class="anchor" id="printMessage"></a>
printMessage(message)</h2>
<p>Prints a message in the Messages Console. Example: hopsan.printMessage("Goddag yxskaft.")</p>
<h2><a class="anchor" id="printInfo"></a>
printInfo(message)</h2>
<p>Prints an info message in the Messages Console. Example: hopsan.printInfo("Goddag yxskaft.")</p>
<h2><a class="anchor" id="printWarning"></a>
printWarning(message)</h2>
<p>Prints a warning message in the Messages Console. Example: hopsan.printWarning("Goddag yxskaft.")</p>
<h2><a class="anchor" id="printError"></a>
printError(message)</h2>
<p>Prints an error message in the Messages Console. Example: hopsan.printError("Goddag yxskaft.")</p>
<h1><a class="anchor" id="PyModelCommands"></a>
Model Commands</h1>
<h2><a class="anchor" id="newmodel"></a>
newModel()</h2>
<p>Create a new model.</p>
<h2><a class="anchor" id="loadmodel"></a>
loadModel(modelFileName)</h2>
<p>Load the model "modelFileName". Example: hopsan.loadModel("c:\mymodel.hmf")</p>
<h2><a class="anchor" id="closeallmodels"></a>
closeAllModels()</h2>
<p>Closes all opened models.</p>
<h2><a class="anchor" id="gototab"></a>
gotoTab(tab)</h2>
<p>Changes active tab to specified tab number.</p>
<h2><a class="anchor" id="entersystem"></a>
enterSystem(sysName)</h2>
<p>Enter subsystem with the specified name. Example: hopsan.enterSystem("My Subsystem")</p>
<h2><a class="anchor" id="exitsystem"></a>
exitSystem()</h2>
<p>Leaves current subsystem and opens parent system.</p>
<h1><a class="anchor" id="PySimulationCommands"></a>
Simulation Commands</h1>
<h2><a class="anchor" id="setStartTime"></a>
setStartTime(start)</h2>
<p>Sets the start time of a simulation. Example: hopsan.setStartTime(1.62)</p>
<h2><a class="anchor" id="setTimeStep"></a>
setTimeStep(timestep)</h2>
<p>Sets the time step of a simulation. Example: hopsan.setTimeStep(0.002)</p>
<h2><a class="anchor" id="setFinishTime"></a>
setFinishTime(stop)</h2>
<p>Sets the finish time of a simulation. Example: hopsan.setFinishTime(16.2)</p>
<h2><a class="anchor" id="startTime"></a>
startTime()</h2>
<p>Returns the start time of a simulation. Example: startTime = hopsan.startTime()</p>
<h2><a class="anchor" id="timeStep"></a>
timeStep()</h2>
<p>Returns the time step time of a simulation. Example: timeStep = hopsan.timeStep()</p>
<h2><a class="anchor" id="finishTime"></a>
finishTime()</h2>
<p>Returns the finish time of a simulation. Example: finishTime = hopsan.finishTime()</p>
<h2><a class="anchor" id="simulate"></a>
simulate()</h2>
<p>Simulates the current model. Example hopsan.simulate()</p>
<h2><a class="anchor" id="getSimulationTime"></a>
getSimulationTime()</h2>
<p>Returns the actual simulation time from last simulation. Example: hopsan.getSimlationTime()</p>
<h2><a class="anchor" id="openAbortDialog"></a>
openAbortDialog(text)</h2>
<p>Open an abort dialog with given text. This makes it possible to abort a lengthy simulation manually. Example: hopsan.openAbortDialog("Abort Simulation")</p>
<h2><a class="anchor" id="isAborted"></a>
isAborted()</h2>
<p>Check if the simulation was aborted. Example: hopsan.isAborted()</p>
<h2><a class="anchor" id="abort"></a>
abort()</h2>
<p>Abort a simulation. Example: hopsan.abort()</p>
<h1><a class="anchor" id="PySimulationOptions"></a>
Simulation Options</h1>
<h2><a class="anchor" id="useMultiCore"></a>
useMultiCore(tf)</h2>
<p>Activates multi-threaded simulations. Example: hopsan.useMultiCore(true)</p>
<h2><a class="anchor" id="setNumberOfThreads"></a>
setNumberOfThreads(value)</h2>
<p>Specifies how many simulation threads that will be used in multi-threaded simulations. Example: hopsan.setNumberOfThreads(2)</p>
<h2><a class="anchor" id="enableProgressBar"></a>
enableProgressBar(tf)</h2>
<p>Enables the simulation progress bar. Example: hopsan.enableProgressBar(true)</p>
<h1><a class="anchor" id="PyModelAccess"></a>
Model Access and Manipulation</h1>
<h2><a class="anchor" id="component"></a>
component(compName)</h2>
<p>Returns a handle to a component. Example: A handle to a component called "myComponent" can be reached and stored in "myHandle" with the command line: myHandle = hopsan.component("myComponent")</p>
<h2><a class="anchor" id="componentNames"></a>
componentNames()</h2>
<p>Returns a list of all component names in the current system. Example: hopsan.componentNames();</p>
<h2><a class="anchor" id="addComponent"></a>
addComponent(name, typename, x, y, rotation)</h2>
<p>Adds a new component with specified name and typename at position (x,y) with specified rotation. Example: hopsan.addComponent("My Orifice", "HydraulicLaminarOrifice", 2000, 2100, 90)</p>
<h2><a class="anchor" id="addComponent"></a>
addComponent(name, typename, x, y, rotation)</h2>
<p>Adds a new component with specified name and typename and subtypename at position (x,y) with specified rotation. Example: hopsan.addComponent("My Orifice", "My SpecailOrifice2", "HydraulicLaminarOrifice", 2000, 2100, 90)</p>
<h2><a class="anchor" id="connect"></a>
connect(compName1, portName1, compName2, portName2)</h2>
<p>Connects specified ports with a straight connector. Example: hopsan.connect("My Orifice", "P1", "My Volume", "P2")</p>
<h2><a class="anchor" id="clearComponents"></a>
clearComponents()</h2>
<p>Removes all components and connections in current open system.</p>
<h1><a class="anchor" id="PyParameterAccess"></a>
Parameter Access</h1>
<h2><a class="anchor" id="parameter"></a>
gparameter(compName, parName)</h2>
<p>Returns the value for the parameter "parName" in the component "compName", Example: value = hopsan.parameter("myOrifice", "Kc")</p>
<h2><a class="anchor" id="setParameter"></a>
setParameter(compName, parName, value)</h2>
<p>Sets the value for the parameter "parName" in the component "compName" to "value", Example: value = hopsan.setParameter("myOrifice", "Kc", 1e-11)</p>
<h2><a class="anchor" id="setSystemParameter"></a>
setSystemParameter(parName, value)</h2>
<p>Sets the system parameter "parName" to "value" in the current system.</p>
<h1><a class="anchor" id="PyPlotFunctions"></a>
Plot Functions</h1>
<h2><a class="anchor" id="plot"></a>
plot(compName, portName, dataName, gen)</h2>
<p>Plots the variable "dataName" in the port "portName" of the component "compName" at the specified (optional) generation "gen". Example: hopsan.plot("sink", "in", "Value")</p>
<h2><a class="anchor" id="plot2"></a>
plot(alias, gen)</h2>
<p>Plots the variable with (alias) name "alias" at the specified (optional) generation. Name can also be the full name of the variable.</p>
<h2><a class="anchor" id="plot3"></a>
plot(VectorVariable)</h2>
<p>Plots the variable pointed to by the VectorVariable python handle object</p>
<h2><a class="anchor" id="figure"></a>
figure(name)</h2>
<p>Create a new empty figure to plot into, or retrieve an existing one</p>
<h2><a class="anchor" id="savePlotDataCSV"></a>
savePlotDataCSV(fileName)</h2>
<p>Save the current figure plot data to CSV file with given fileName.</p>
<h2><a class="anchor" id="savePlotDataPLO"></a>
savePlotDataPLO(fileName)</h2>
<p>Save the current figure plot data to PLO file with given fileName.</p>
<h1><a class="anchor" id="PyVariableAccess"></a>
Variable Access</h1>
<h2><a class="anchor" id="getVariable"></a>
getVariable(compName, portName, dataName, gen)</h2>
<p>Returns a VectorVariable handle to the data variable "dataName" in the port "portName" of the component "compName" at the specified (optional) generation "gen". Example: var=hopsan.getVariable("sink", "in", "Value", 5)</p>
<h2><a class="anchor" id="getVariable2"></a>
getVariable(name, gen)</h2>
<p>Returns a VectorVariable handle to the data variable with alias or fullName "name" at the specified (optional) generation "gen". Example: var=hopsan.getVariable("apa")</p>
<h2><a class="anchor" id="addVectorVariable"></a>
addVectorVariable(name, data)</h2>
<p>Add a hopsan vector variable with desired "name" from a raw python array or list of values "data". Example: hopsan.addVectorVariable("pyVar", a)</p>
<h2><a class="anchor" id="addTimeVariable"></a>
addTimeVariable(name, time, data)</h2>
<p>Add a hopsan time domain vector variable with desired "name" from a raw python array or list of values "time" and "data"</p>
<h2><a class="anchor" id="addFrequencyVariable"></a>
addFrequencyVariable(name, freq, data)</h2>
<p>Add a hopsan frequency domain vector variable with desired "name" from a raw python array or list of values "freq" and "data"</p>
<h1><a class="anchor" id="componentCommands"></a>
Component Python Handle Commands</h1>
<p>These commands can be used on Python Component Handle objects.</p>
<h2><a class="anchor" id="parameter"></a>
gparameter(compName, parName)</h2>
<p>Returns the value of parameter "parName". Example: Kc = hopsan.component("Orifice").parameter("Kc")</p>
<h2><a class="anchor" id="setParameter"></a>
setParameter(compName, parName, value)</h2>
<p>Sets the parameter "parName" to "value". Example: hopsan.component("Orifice").setParameter("Kc", 1e-10)</p>
<h2><a class="anchor" id="port"></a>
port(portName)</h2>
<p>Returns a handle to the port "portName" Example: hopsan.component("Orifice").port("P2")</p>
<h2><a class="anchor" id="portNames"></a>
portNames()</h2>
<p>Returns an array of port names in the component Example hopsan.component("Orifice").portNames()</p>
<h1><a class="anchor" id="portCommands"></a>
Port Python Handle Commands</h1>
<p>These commands can be used on Python Port Handle objects.</p>
<h2><a class="anchor" id="portplot"></a>
plot(dataName)</h2>
<p>Opens a new plot window with the variable "dataName". Example: hopsan.component("Orifice").port("P2").plot("Pressure")</p>
<h2><a class="anchor" id="lastData"></a>
lastData(dataName)</h2>
<p>Returns the last value of variable "dataName". Example: lastP1 = hopsan.component("Orifice").port("P2").lastData("Pressure")</p>
<h2><a class="anchor" id="getdatavector"></a>
data(dataName)</h2>
<p>Returns the raw Python data vector from last simulation for variable "dataName". Example: pressuredata = hopsan.component("Orifice").port("P2").data("Pressure")</p>
<h2><a class="anchor" id="gettimevector"></a>
time()</h2>
<p>Returns the time vector from the last simulation. Example: time = hopsan.component("Orifice").port("P2").time()</p>
<h2><a class="anchor" id="variable"></a>
variable(dataName)</h2>
<p>Returns a handle to the VectorVariable with name "dataName" Example: pressureVar = hopsan.component("Orifice").port("P2").variable("Pressure")</p>
<h2><a class="anchor" id="variableNames"></a>
variableNames()</h2>
<p>Returns a list of the variable names in this port</p>
<h1><a class="anchor" id="variableCommands"></a>
VectorVariable Python Handle Commands</h1>
<p>These commands can be used on Python VectorVariable Handle objects.</p>
<h2><a class="anchor" id="varibaleType"></a>
variableType()</h2>
<p>Returns the type of the variable, VectorVariable, TimeDomain or FrequencyDomain</p>
<h2><a class="anchor" id="time"></a>
time()</h2>
<p>Returns the raw python array of time values for a TimeDomain variable</p>
<h2><a class="anchor" id="frequency"></a>
frequency()</h2>
<p>Returns the raw python array of frequency values for a FrequencyDomain variable</p>
<h2><a class="anchor" id="data"></a>
data()</h2>
<p>Returns the raw python array of data values from the variable</p>
<h2><a class="anchor" id="peek"></a>
peek</h2>
<p>Returns the value at "index" in the vector variable</p>
<h2><a class="anchor" id="poke"></a>
poke</h2>
<p>Sets the "value" at given "index" in the vector variable</p>
<h2><a class="anchor" id="assign"></a>
assign(data)</h2>
<p>Assign the data in a vector variable from the raw python array "data"</p>
<h2><a class="anchor" id="assign"></a>
assign(data)</h2>
<p>Assign the time or frequency and data in a TimeDomain or FrequnecyDomain vector variable from the raw python arrays "timeORfrequency" and "data" </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Sep 16 2019 10:42:36 for Hopsan by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
