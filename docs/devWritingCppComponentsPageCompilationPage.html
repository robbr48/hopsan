<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hopsan: Compiling the Component Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hopsan.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hopsan
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('devWritingCppComponentsPageCompilationPage.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Compiling the <a class="el" href="classhopsan_1_1Component.html">Component</a> Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When your code is finished, the project must be compiled. It is necessary to use the same compiler that your version of Hopsan was compiled with. The project must also be compiled in <b>release</b> mode unless you are building against a debug compiled version of the HopsanCore in debug mode.</p>
<p>There are two ways of compiling your library: <br />
 <b>The simple way:</b> <br />
</p><ol type="1">
<li>Install the compiler according to <a class="el" href="page_setuplibrarydevelopmentenvironment.html">How to setup the component library development environment</a> <br />
</li>
<li>Make sure that your library has a libraryinformation .xml file according to <a class="el" href="devWritingCppComponentsPageLibraryFilesPage.html#devWritingCppComponentsPageLibraryFilesPage-hopsancomponentlibraryfile">The Hopsan Component Library Information File</a> At least the <b>lib</b> and <b>source</b> elements must be present. You may also need additional build flags if your library depends on third party code. <br />
 <b>Note!</b> The build flags for linking against HopsanCore are added automatically during the build process.</li>
<li>When you load the library in HopsanGUI for the first time it will be compiled. It will also be automatically recompiled if the library fails to load. This happens if you have updated Hopsan to a new version. A window will notify you of any compilation warnings or errors.</li>
<li>If you make any changes to your component library code, you must <b>remeber</b> to manually <b>recompile</b> the library from the right-click menu in the library widget. If you get errors during compilation, you must fix them before the library can be used. You should also strive to fix any warnings generated by your code. They indicate that something is not quite right and while to code "works" you may not get the expected result.</li>
</ol>
<p><b>The less simple way:</b> <br />
</p><ol type="1">
<li>Use an external build environment, such as the QtCreator IDE and qmake. See the instructions for installing the development environment <a class="el" href="page_setupbuildenvironment.html">How to setup the Hopsan build environment</a> .<br />
 <b>You only need to install the Qt Creator IDE and the Qt libraries.</b> The external build tools are only be necessary if you want to recompile Hopsan itself.</li>
<li>See the exampleComponentLibrary files for examples on how to write the Qt project file. You must add the include path to <code>Hopsan/HopsanCore/include</code> and the linker path to <code>Hopsan/bin</code>. You must use the intended Hopsan version, so if you have multiple versions installed in different places you must change these when switching version.</li>
<li><b>Note!</b> if the library information file has a <b>lib</b> and <b>source</b> element you can still (re)compile the library from inside HopsanGUI as well.</li>
</ol>
<p><b>Compiling and Linking:</b> <br />
 The compilation goes through two phases, first the .cpp file(s) are compiled and then they are linked into a shared object .dll, .so or .dynlib file that will appear in your library directory.</p>
<p>If something is wrong in your code you may get compilation errors in the first phase, you will need to correct those before the linking step can proceed. You should also pay attention to warnings, they may indicate that your code will not produce the expected result. The error and warning messages are <em>usually</em> quite descriptive and points to the line where the problem comes from.</p>
<p>You may also get linker errors which are a bit more difficult to understand if you are not used to compiling you own code. If you get something similar to the following error message: <code>"cannot find -lhopsancore"</code> you have probably set the <em>LIBS</em> path incorrectly in your Qt project file. It should point to where the HopsanCore .dll, .so, .dynlib file is located. Also specify the correct <em>release</em> or <em>debug</em> HopsanCore file <code>-lhopsancore</code> or <code>-lhopsancore_d</code></p>
<p><b>ToDo:</b> <em>This section should list common compilation and linking errors and who to solve them</em> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Sep 16 2019 10:42:36 for Hopsan by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
