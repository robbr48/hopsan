<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hopsan: Introduction Writing Custom Components</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hopsan.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hopsan
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('devWritingCppComponentsPageIntroPage.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Introduction Writing Custom Components </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The majority of the Hopsan component code is contained within the HopsanCore. When a new component is created, only the parts which make the new component unique needs to be specified. All other functionality is inherited from the base implementation in the HopsanCore. The code that is written for the new components must be compiled into a shared object file .dll (Windows), .so (UNIX) or .dynlib (MacOS) file. This file will contain the runtime executable code for the new components. While simulating, Hopsan will call functions in this file when the component is created, initialized, finalized and when it takes a simulation step.</p>
<p>The compiled library file can include one or several new components. It must also include two mandatory functions used by the HopsanCore to get information about and to register the contents of the library once it is loaded. A description of the library files is given in <a class="el" href="devWritingCppComponentsPageLibraryFilesPage.html">The Component Library Files</a></p>
<h1><a class="anchor" id="devWritingCppComponentsPageIntroPage-prerequisites"></a>
Prerequisites</h1>
<ul>
<li>Basic knowledge of C++</li>
<li>Basic knowledge of TLM modeling (unless you are writing a Signal component)</li>
<li>Development tools<ul>
<li>Compiler, MinGW32 or MinGW64 (MS Windows), GNU GCC (Linux) VisualC++ (Windows) is needed if you want to compile a model export to Matlab/Simulink.</li>
<li>Qt Creator (IDE) and the Qt libraries (if you are writing libraries manually based on the Example component library) (The examples use Qt project files that must be processed by <em>qmake</em> to generate <em>Makefiles</em>, but you may use any code editor that you like) If you use another IDE or development environment you must write the <em>Makefiles</em> yourself (if you choose this approach we assume that you know how).</li>
</ul>
</li>
</ul>
<p>See the <a class="el" href="page_setupbuildenvironment.html">How to setup the Hopsan build environment</a> or <a class="el" href="page_setuplibrarydevelopmentenvironment.html">How to setup the component library development environment</a> page for instructions on how to set up your development environment.</p>
<h1><a class="anchor" id="devWritingCppComponentsPageIntroPage-exampleComponentLibrary"></a>
The Example Component Library</h1>
<p>The documentation examples are based on the exampleComponentLibrary that is included in each Hopsan release. You can find it in your Hopsan installation directory, under <code>componentLibraries/exampleComponentLib</code>. These documentation examples contain subsets of the original files, you should also look at the original files for their full content and additional comments. When creating a new component library, you can use the example files as a "getting started" template.</p>
<h1><a class="anchor" id="devWritingCppComponentsPageIntroPage-Tools"></a>
Tools</h1>
<p><b>HoLC (Hopsan Library Creator):</b> <br />
From Hopsan version 0.7 the HoLC program is included. It can help you get started by generating the necessary library files and offers a dialog based component template code generator. HoLC also has some limited code editor functionality but may be sufficient for your needs.</p>
<p><b>generateLibraryFiles.py:</b> <br />
If you end up building large component libraries, then this python script may come in handy. It can be used to automatically generate header and source include files as well as Qt project include files for the entire library tree recursively. See the defualtComponentLibrary that is included in each Hopsan release for an example. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Sep 16 2019 10:42:36 for Hopsan by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
